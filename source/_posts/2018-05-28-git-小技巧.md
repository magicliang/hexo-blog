---
title: ' git 小技巧'
date: 2018-05-28 20:01:27
tags:
- git
---
## 怎样把一些 commit 从当前分支（通常是 master 移到另一个分支）

移走而不是复制

```
git branch newbranch      # Create a new branch, saving the desired commits
git reset --hard HEAD~3   # Move master back by 3 commits (GONE from master)
git checkout newbranch    # Go to the new branch that still has the desired commits
```

## 怎样把当前分支的提交直接复制到其他分支

### cherry-pick

```
git checkout master
git cherry-pick --no-commit d0的哈希 d1的哈希 d2的哈希
git commit -m "merged commit"
```

用 cherry-pick 挑选一个 branch 上的 commit 单独 apply 到另一个 branch 上。

### merge squash

```
git merge d2 --squash
```

## 基于某一个分支压缩本分支上的修改

```
git rebase --interactive --preserve-merges refs/heads/master
```

这样本分支就可以基于对 master 的 head 的指针变化，衍生一套新的 commit 集合，在这个集合生成的时候可以使用 squash。