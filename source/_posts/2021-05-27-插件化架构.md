---
title: 插件化架构
date: 2021-05-27 16:11:08
tags:
- 领域驱动设计
- 系统架构
- 插件化 
- 未完成
---
# 为什么要实现插件化架构

业务和平台要解耦。业务和平台都是多对多的关系。全链路里既有业务，也有平台。大家应该如何 talk by interface。我们看待复杂组织的业务流程，要线性看，看到很多节点；也要分层看，看到复合的层次。在这种情况下，上层架构域和下层架构域之间怎么实现复杂度的管理？

## 从业务视角来看，要解决多团队协同的问题

因为多个业务域/团队没有把能力用统一的方式透出，所以没有人能够知道统一的技术能力应该怎么串联。进行全链路沟通需要大量的沟通对齐工作。

从业务视角来看，复杂性业务要素包含本业务用例里的各种模型。

## 从平台视角来看，要解决复杂性管理问题

平台要支撑多种业务，业务的复杂性、差异性，以及众多业务需求不确定性，在各平台内部如何管理和支撑？使用简单的 if-else 是很难管理好，确保对业务的支撑能力不相互影响。隔离是最好的管理手法。

从平台视角来看，复杂性业务要素包含本域内标准系统用例里的各种模型。

同一个模型，在业务场景里看到的是具体的模型-如外卖；而在平台层想到的是商品。业务层看到的是外卖的成交、制作、配送，而平台层看到的是商品的上单、供给、交易、退款、履约。

# 如何实现插件化架构

通过插件化技术架构，使业务与平台隔离，解决业务差异性和不确定性。让业务可以扩展平台能力-通过回调来实现架构上的反向依赖，但主流程大部分时候是跑在平台里的。

## 具体原则

- 平台提供经过业务抽象的、标准化业务能力；同时提供可扩展的扩展点（extension 或者 slot），开放给业务进行个性化定制。
- 业务基于可扩展扩展点，进行业务个性化定制开发，实现自己的业务。
- 平台与业务是共建、共享、反哺的关系。平台深入到业务，抽象建模出通用的标准业务能力，同时设计供业务进行个性定制的扩展点。

## 通过 sdk 进行通信和解耦

统一业务语言和概念，把控业务全貌。

- 从各平台提供的平台产品/商业能力视角出发，构建全平台统一SDK，分门别类设计能力扩展点，统一透出给业务方进行个性化定制，提供缺省的扩展点封装实现。
- 统一业务身份，一个业务扩展包、一个业务身份贯穿所有业务平台。
- 构建业务运营支撑发布平台，业务可视、可管、可运营。
- 通过业务能力SDK + 运营支撑发布平台，把商业能力、需求结构化和服务代码建立映射，做到需求即PRD-> PRD即代码 -> 代码即部署 -> 部署即监控。

![插件化架构.png](插件化架构.png)
[插件化架构.drawio](插件化架构.drawio)

# TMF

# BPF

# COLA


