---
title: dc 笔记
date: 2019-04-08 23:24:22
tags:
- 系统架构
---
## 名词解释

ldc logical data center
idc internet data center

ldc 是 idc 的进化版，是一种单元化部署方案。

## 扩展模式 vs 镜像模式

扩展模式是把服务/数据库分拆，然后部署到不同的机房里面，相当于放大了一个物理机房。

镜像模式是每个机房里部署的服务都是一样的，每个机房承担一定流量。

镜像模式的容灾效果更好，难度在如何切分流量上。容灾还要考虑机房级容灾、部署地容灾的问题。多地部署带来距离，距离带来延时，延时带来 replica 的风险。

## 单元化部署

所谓 cell，是一个能完成所有业务操作的自包含集合。一般的 soa 架构，服务是分层的，而且每一层的任一节点都可以被其他机房调用。而单元化部署的结果是，本单元的上层节点，只会调用本单元的下层节点。它具有一个站点全部的功能，但不具有一个站点全部的流量。

这种单元化部署实际上就要求底层的数据也要做 sharding。单元化的结果是，数据库连接可以更好地被复用-多个单元互相跨 db 连接，其实很浪费资源。


## 现实妥协

架构总有显示的黑暗面。

如何解决：

- 全局数据依赖
- 异地时延

所以有些部署单元要全局冗余，然后对拷。
