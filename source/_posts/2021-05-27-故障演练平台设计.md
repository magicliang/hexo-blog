---
title: 故障演练平台设计
date: 2021-05-27 14:33:43
tags:
- 云计算
---
# 为什么要有这样一个平台

随着业务的发展，公司内部的服务负载能力、复杂程度、稳定性要求随之上升。

常见的服务的保护措施有：

1. 业务突发流量上升，超过了服务的负载能力，有可能导致服务不可用；
2. 有些特殊的业务场景，开发环境没有测试到位，在线上暴露出来，没有一种兜底措施；
3. 部分服务因为负载超荷，响应时间很长，很有可能导致整条业务链奔溃；
4. 线上出现故障时，没有一套成熟应急预案。

因此，我们需要一套保障服务高效、稳定运行的系统，也就是针对以上场景提供服务保护能力的平台。

# 常见功能

1. 熔断降级
2. 流量控制
3. SOP预案
4. 主动GC
5. 资源隔离（线程池）
6. 禁用主机
7. 方法重试
8. 故障模拟（对混沌工程场景有用）

# 功能实现的一些思路

## 预案管理

一个健康的故障处理的正反馈链路通常包含四个步骤：

1. 故障发生
2. 故障定位
3. 故障处理
4. 故障复盘与演练。

从SOP预案的执行形态来划分，SOP预案的发展大致分为以下三个阶段：人工执行阶段、一键执行阶段、自动执行阶段-从降级到熔断，其实是一种执行自动化的升华过程。

## 线程池设计

[服务保护平台线程池.xmind](服务保护平台线程池.xmind)
![服务保护平台线程池.png](服务保护平台线程池.png)